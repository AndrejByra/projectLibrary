CREATE TABLE log_history ( 
id INT PRIMARY KEY AUTO_INCREMENT, 
user VARCHAR(30) NOT NULL UNIQUE,
date DATETIME default CURRENT_TIMESTAMP,
FOREIGN KEY (user) REFERENCES Users(ID)
ON DELETE CASCADE
);

CREATE TABLE users(
id INT PRIMARY KEY AUTO_INCREMENT, 
name VARCHAR(30) NOT NULL,
surename VARCHAR(30) NOT NULL,
username VARCHAR(30) NOT NULL UNIQUE,
password VARCHAR(30) NOT NULL
phone VARCHAR(15) NOT NULL,
email VARCHAR(80) NOT NULL UNIQUE,
adress VARCHAR(50) NOT NULL,
city VARCHAR(30) NOT NULL,
postcode VARCHAR(30) NOT NULL
);

CREATE TABLE record(
id INT PRIMARY KEY AUTO_INCREMENT, 
idu VARCHAR(30) NOT NULL,
idb VARCHAR(30) NOT NULL,
date DATETIME default CURRENT_TIMESTAMP,
FOREIGN KEY (idu) REFERENCES Users(id)
ON DELETE CASCADE,
FOREIGN KEY (idb)REFERENCES Books(id)
ON DELETE CASCADE
);

CREATE TABLE books(
id INT PRIMARY KEY AUTO_INCREMENT, 
name VARCHAR(30) NOT NULL,
author VARCHAR(30) NOT NULL,
status boolean NOT NULL
);

CREATE TABLE books_details(
id INT PRIMARY KEY AUTO_INCREMENT, 
books VARCHAR(30) NOT NULL,
isbn VARCHAR(20) NOT NULL UNIQUE,
genre VARCHAR(30) NOT NULL,
detailsOfBook text,
image CHAR(50),
FOREIGN KEY (books) REFERENCES books_details(id)
ON DELETE CASCADE
);

CREATE TABLE TOKENS(

id INT PRIMARY KEY AUTO_INCREMENT, 

idu VARCHAR(30) NOT NULL,

token VARCHAR(50) DEFAULT NULL,

FOREIGN KEY (idu) REFERENCES users(id)

);